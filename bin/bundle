#!/usr/bin/env ruby
if ARGV[0..1] == ["exec", "ruby"]
  # stop execution early, to not load bundler/setup twice, to not parse the gemfile/dependencies twice
  exec "ruby", "-rbundler/setup", *ARGV[2..-1] # execution ends here
end

require 'bundler'
# Check if an older version of bundler is installed
$:.each do |path|
  if path =~ %r'/bundler-0.(\d+)' && $1.to_i < 9
    err = "Please remove Bundler 0.8 versions."
    err << "This can be done by running `gem cleanup bundler`."
    abort(err)
  end
end

require 'bundler/cli'
require 'bundler/friendly_errors'
Bundler.with_friendly_errors { Bundler::CLI.start }
